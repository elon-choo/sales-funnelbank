# 마그네틱 세일즈 웹앱 - 기능 정의서

> **문서 버전**: 1.0
> **작성일**: 2025-12-15
> **참조 문서**: 00_요구사항_정의서.md, 04_의사결정_로그.md

---

## 1. 기능 목록 개요

### 1.1 MVP (Phase 1) 기능

| 카테고리 | 기능 ID | 기능명 | 우선순위 |
|---------|---------|--------|----------|
| 인증 | AUTH-001 ~ 005 | 회원가입, 로그인, 로그아웃, 승인 확인, 비밀번호 재설정 | P0 |
| AI 기획 도우미 | AI-001 ~ 005 | 대화 시작, 히스토리, 18단계 안내, 기획 요약, 프롬프트 생성 | P0 |
| 랜딩페이지 빌더 | LP-001 ~ 006 | 템플릿 선택, AI 콘텐츠 생성, 이미지 업로드, 미리보기, 배포, 수정/삭제 | P0-P1 |
| DB 수집 | DB-001 ~ 002 | 구글 폼 연결, CTA 버튼 삽입 | P0 |
| 대시보드 | DASH-001 ~ 002 | 프로젝트 목록, 기본 통계 | P1 |

### 1.2 Phase 2 기능 (향후 개발)

| 카테고리 | 기능명 | 설명 |
|---------|--------|------|
| 인증 | 소셜 로그인 | 카카오, 네이버 로그인 |
| 인증 | 자동 승인 시스템 | 결제 연동 기반 자동 승인 |
| 빌더 | 고급 편집 기능 | 섹션 드래그앤드롭, 커스텀 CSS |
| 빌더 | 템플릿 마켓 | 다양한 업종별 템플릿 |
| 분석 | 분석 대시보드 | 전환율, 클릭률, 히트맵 |
| DB 수집 | 자체 폼 빌더 | Supabase 직접 저장 |
| 결제 | 결제 시스템 | 추가 기능 유료화 |

---

## 2. 인증 기능 상세 정의

### AUTH-001: 회원가입

| 항목 | 내용 |
|------|------|
| **기능 ID** | AUTH-001 |
| **기능명** | 이메일/비밀번호 회원가입 |
| **설명** | 신규 사용자가 이메일과 비밀번호로 계정을 생성하고, 수강생 승인을 대기하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 검증 규칙 |
|--------|------|------|-----------|
| email | string | Y | 이메일 형식, 중복 불가 |
| password | string | Y | 최소 8자, 영문+숫자+특수문자 조합 |
| passwordConfirm | string | Y | password와 일치 |
| name | string | Y | 2-20자 |
| phone | string | N | 010-XXXX-XXXX 형식 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| success | boolean | 가입 성공 여부 |
| userId | string | 생성된 사용자 ID |
| message | string | 결과 메시지 |

#### 비즈니스 규칙
1. 가입 시 `approved: false`로 저장 (DEC-003 준수)
2. 가입 완료 후 "승인 대기" 안내 페이지로 이동
3. 관리자에게 신규 가입 알림 발송 (선택사항)
4. 이메일 중복 시 "이미 가입된 이메일입니다" 메시지 표시

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 이메일 중복 | 에러 메시지 표시, 로그인 페이지 링크 제공 |
| 비밀번호 불일치 | 실시간 유효성 검사로 경고 |
| 네트워크 오류 | "잠시 후 다시 시도해주세요" 메시지 |
| Supabase 오류 | 오류 로깅 후 일반 에러 메시지 표시 |

---

### AUTH-002: 로그인

| 항목 | 내용 |
|------|------|
| **기능 ID** | AUTH-002 |
| **기능명** | 이메일/비밀번호 로그인 |
| **설명** | 승인된 사용자가 이메일과 비밀번호로 로그인하여 서비스를 이용하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 검증 규칙 |
|--------|------|------|-----------|
| email | string | Y | 이메일 형식 |
| password | string | Y | 최소 1자 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| success | boolean | 로그인 성공 여부 |
| accessToken | string | JWT 액세스 토큰 |
| refreshToken | string | JWT 리프레시 토큰 |
| user | object | 사용자 정보 |

#### 비즈니스 규칙
1. 승인되지 않은 사용자는 로그인 불가 (DEC-003 준수)
2. 5회 연속 실패 시 15분 잠금
3. 로그인 성공 시 대시보드로 리다이렉트
4. "로그인 유지" 옵션 제공 (7일간)

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 미승인 사용자 | "관리자 승인 대기 중입니다" 메시지 |
| 잘못된 비밀번호 | "이메일 또는 비밀번호가 일치하지 않습니다" |
| 존재하지 않는 계정 | 동일한 에러 메시지 (보안) |
| 계정 잠금 | "N분 후 다시 시도해주세요" |

---

### AUTH-003: 로그아웃

| 항목 | 내용 |
|------|------|
| **기능 ID** | AUTH-003 |
| **기능명** | 로그아웃 |
| **설명** | 현재 세션을 종료하고 인증 토큰을 무효화하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
- 없음 (현재 세션 기반)

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| success | boolean | 로그아웃 성공 여부 |

#### 비즈니스 규칙
1. 로컬 스토리지의 토큰 삭제
2. Supabase 세션 종료
3. 로그인 페이지로 리다이렉트

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 세션 없음 | 로그인 페이지로 리다이렉트 |
| API 오류 | 로컬 토큰만 삭제 후 리다이렉트 |

---

### AUTH-004: 승인 상태 확인

| 항목 | 내용 |
|------|------|
| **기능 ID** | AUTH-004 |
| **기능명** | 사용자 승인 상태 확인 |
| **설명** | 현재 로그인한 사용자의 수강생 승인 상태를 확인하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| userId | string | Y | 확인할 사용자 ID |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| approved | boolean | 승인 여부 |
| approvedAt | datetime | 승인 일시 (승인된 경우) |
| status | string | 상태 코드 (pending/approved/rejected) |

#### 비즈니스 규칙
1. 모든 API 요청 시 승인 상태 검증
2. 승인되지 않은 사용자는 제한된 페이지만 접근 가능
3. 승인 상태 변경 시 사용자에게 이메일 알림 (선택사항)

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 사용자 없음 | 401 Unauthorized |
| DB 조회 실패 | 500 Internal Server Error |

---

### AUTH-005: 비밀번호 재설정

| 항목 | 내용 |
|------|------|
| **기능 ID** | AUTH-005 |
| **기능명** | 비밀번호 재설정 |
| **설명** | 이메일 인증을 통해 비밀번호를 재설정하는 기능 |
| **우선순위** | P1 |

#### 입력 (재설정 요청)
| 필드명 | 타입 | 필수 | 검증 규칙 |
|--------|------|------|-----------|
| email | string | Y | 등록된 이메일 |

#### 입력 (비밀번호 변경)
| 필드명 | 타입 | 필수 | 검증 규칙 |
|--------|------|------|-----------|
| token | string | Y | 이메일로 발송된 토큰 |
| newPassword | string | Y | 최소 8자, 영문+숫자+특수문자 |
| confirmPassword | string | Y | newPassword와 일치 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| success | boolean | 재설정 성공 여부 |
| message | string | 결과 메시지 |

#### 비즈니스 규칙
1. 토큰 유효시간: 30분
2. 토큰은 1회만 사용 가능
3. 재설정 완료 시 모든 기존 세션 무효화

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 미등록 이메일 | "등록된 이메일이면 재설정 링크가 발송됩니다" (보안) |
| 만료된 토큰 | "링크가 만료되었습니다. 다시 요청해주세요" |
| 이미 사용된 토큰 | 동일한 만료 메시지 |

---

## 3. AI 기획 도우미 기능 상세 정의

### AI-001: 대화 시작/종료

| 항목 | 내용 |
|------|------|
| **기능 ID** | AI-001 |
| **기능명** | AI 기획 대화 세션 관리 |
| **설명** | 마그네틱 세일즈 기반 랜딩페이지 기획을 위한 AI 대화 세션을 시작하고 종료하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력 (세션 시작)
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| projectId | string | N | 기존 프로젝트 연결 시 |
| sessionType | string | Y | 'landing_page' | 'detail_page' |

#### 입력 (대화 메시지)
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| sessionId | string | Y | 현재 세션 ID |
| message | string | Y | 사용자 입력 메시지 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| sessionId | string | 생성된 세션 ID |
| response | string | AI 응답 메시지 |
| currentStep | number | 현재 진행 단계 (1-18) |
| nextQuestions | array | 다음 질문 목록 |
| isComplete | boolean | 기획 완료 여부 |

#### 비즈니스 규칙
1. Claude API 사용 (claude-3-5-sonnet-20241022) - DEC-004 준수
2. 스트리밍 응답 지원 (첫 토큰 1초 이내)
3. 세션 타임아웃: 30분 비활동 시 자동 저장
4. 컨텍스트 유지: 이전 대화 내용 기반 응답

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| API 한도 초과 | "잠시 후 다시 시도해주세요" |
| 네트워크 오류 | 마지막 메시지 재전송 옵션 제공 |
| 세션 만료 | 자동 저장 후 새 세션 시작 안내 |

---

### AI-002: 대화 히스토리 저장/불러오기

| 항목 | 내용 |
|------|------|
| **기능 ID** | AI-002 |
| **기능명** | 대화 히스토리 관리 |
| **설명** | AI와의 대화 내용을 저장하고 이전 대화를 불러오는 기능 |
| **우선순위** | P1 |

#### 입력 (저장)
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| sessionId | string | Y | 저장할 세션 ID |
| title | string | N | 세션 제목 (미입력 시 자동 생성) |

#### 입력 (불러오기)
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| sessionId | string | Y | 불러올 세션 ID |

#### 출력 (목록 조회)
| 필드명 | 타입 | 설명 |
|--------|------|------|
| sessions | array | 세션 목록 |
| sessions[].id | string | 세션 ID |
| sessions[].title | string | 세션 제목 |
| sessions[].createdAt | datetime | 생성 일시 |
| sessions[].lastMessageAt | datetime | 마지막 메시지 일시 |
| sessions[].messageCount | number | 메시지 수 |
| sessions[].status | string | 상태 (in_progress/completed) |

#### 비즈니스 규칙
1. 사용자당 최대 50개 세션 저장
2. 90일 이상 미사용 세션 자동 삭제
3. 세션 제목 자동 생성: "업종명 + 날짜"

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 세션 없음 | 404 Not Found |
| 저장 한도 초과 | 가장 오래된 세션 삭제 안내 |

---

### AI-003: 마그네틱 세일즈 18단계 안내

| 항목 | 내용 |
|------|------|
| **기능 ID** | AI-003 |
| **기능명** | 18단계 시스템 기반 질문 안내 |
| **설명** | 마그네틱 세일즈 18단계에 맞춰 체계적으로 질문하고 정보를 수집하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 18단계 질문 체계 (랜딩페이지 기획용)

| 단계 | 카테고리 | 질문 목적 | 예시 질문 |
|------|---------|-----------|-----------|
| 1-4 | 전략 설계 | 전문가 정체성, 타겟, 제안, 시나리오 | "어떤 분야의 전문가이신가요?" |
| 5-7 | 오프닝 | 첫인상, 신뢰, 프레임 | "고객이 첫 방문 시 느꼈으면 하는 인상은?" |
| 8-10 | Valley | 문제 인식, 고통 설계 | "고객의 가장 큰 고민 3가지는?" |
| 11-13 | Peak | 희망, 솔루션, 가치 입증 | "문제 해결 후 고객의 이상적인 미래는?" |
| 14-16 | 제안 | 가격, 증거, 리스크 제거 | "제공하는 보장이나 환불 정책은?" |
| 17-18 | 클로징 | 긴급성, CTA | "지금 행동해야 하는 이유는?" |

#### 출력 (단계별)
| 필드명 | 타입 | 설명 |
|--------|------|------|
| currentStep | number | 현재 단계 (1-18) |
| stepName | string | 단계명 |
| questions | array | 해당 단계 질문 목록 |
| collectedData | object | 수집된 정보 요약 |
| progress | number | 진행률 (%) |

#### 비즈니스 규칙
1. 각 단계에서 필수 정보 수집 후 다음 단계로 진행
2. 사용자가 "건너뛰기" 선택 시 기본값 적용
3. 언제든 이전 단계로 돌아가서 수정 가능
4. 진행률 시각적 표시 (프로그레스 바)

---

### AI-004: 기획 결과 요약 생성

| 항목 | 내용 |
|------|------|
| **기능 ID** | AI-004 |
| **기능명** | 기획 결과 요약 문서 생성 |
| **설명** | 18단계 대화 완료 후 랜딩페이지 기획 요약본을 생성하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| sessionId | string | Y | 완료된 세션 ID |

#### 출력 (기획 요약)
```yaml
summary:
  business_info:
    industry: "업종"
    target_audience: "타겟 고객"
    unique_value: "차별화 포인트"

  landing_page_structure:
    headline: "메인 헤드라인 (3개 옵션)"
    subheadline: "서브 헤드라인 (3개 옵션)"
    sections:
      - hook: "훅 섹션 내용"
      - valley: "문제/고통 섹션 내용"
      - peak: "희망/솔루션 섹션 내용"
      - proof: "증거/후기 섹션 내용"
      - offer: "제안 섹션 내용"
      - cta: "CTA 섹션 내용"

  copy_elements:
    pain_points: ["고통1", "고통2", "고통3"]
    benefits: ["혜택1", "혜택2", "혜택3"]
    testimonials_needed: ["후기 유형 1", "후기 유형 2"]
    cta_text: "CTA 문구 (3개 옵션)"

  required_images:
    - type: "hero"
      description: "메인 이미지 설명"
      recommended_size: "1920x1080"
    - type: "profile"
      description: "프로필 이미지"
      recommended_size: "400x400"
```

#### 비즈니스 규칙
1. 18단계 중 최소 12단계 완료 시 요약 생성 가능
2. 미완료 항목은 "추가 정보 필요" 표시
3. 요약본 PDF 다운로드 지원

---

### AI-005: 랜딩페이지 프롬프트 생성

| 항목 | 내용 |
|------|------|
| **기능 ID** | AI-005 |
| **기능명** | AI 랜딩페이지 생성 프롬프트 생성 |
| **설명** | 기획 요약을 기반으로 랜딩페이지 빌더용 프롬프트를 자동 생성하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| summaryId | string | Y | 기획 요약 ID |
| templateType | string | Y | 템플릿 유형 선택 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| prompt | string | 랜딩페이지 생성용 프롬프트 |
| imageGuide | array | 필요 이미지 목록 및 가이드 |
| estimatedSections | number | 예상 섹션 수 |

#### 비즈니스 규칙
1. 프롬프트에 마그네틱 세일즈 원칙 자동 반영
2. FBI(Feature-Benefit-Impact) 구조 적용
3. 프롬프트 복사 버튼 제공

---

## 4. 랜딩페이지 빌더 기능 상세 정의

### LP-001: 템플릿 선택

| 항목 | 내용 |
|------|------|
| **기능 ID** | LP-001 |
| **기능명** | 랜딩페이지 템플릿 선택 |
| **설명** | 업종/목적에 맞는 랜딩페이지 템플릿을 선택하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| templateId | string | Y | 선택한 템플릿 ID |

#### MVP 템플릿 목록 (3종)
| 템플릿 ID | 템플릿명 | 적합 업종 | 섹션 구성 |
|-----------|----------|-----------|-----------|
| TPL-001 | 코칭/컨설팅 | 코치, 컨설턴트 | Hero + Problem + Solution + Proof + Offer + CTA |
| TPL-002 | 서비스 상세 | 보험, 피부샵 | Hero + Benefits + Process + Testimonials + FAQ + CTA |
| TPL-003 | 리드 수집 | 범용 | Hero + Value + Form + Trust |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| template | object | 템플릿 상세 정보 |
| template.sections | array | 섹션 목록 |
| template.requiredFields | array | 필수 입력 필드 |
| template.preview | string | 미리보기 URL |

#### 비즈니스 규칙
1. MVP에서는 3가지 기본 템플릿만 제공
2. 템플릿 미리보기 제공
3. 선택 후에도 템플릿 변경 가능 (입력 데이터 유지)

---

### LP-002: AI 콘텐츠 생성

| 항목 | 내용 |
|------|------|
| **기능 ID** | LP-002 |
| **기능명** | AI 기반 랜딩페이지 콘텐츠 생성 |
| **설명** | 기획 프롬프트와 이미지를 기반으로 랜딩페이지 HTML/CSS 콘텐츠를 생성하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| projectId | string | Y | 프로젝트 ID |
| prompt | string | Y | 기획 프롬프트 (AI-005 출력) |
| templateId | string | Y | 선택된 템플릿 |
| images | array | N | 업로드된 이미지 배열 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| pageId | string | 생성된 페이지 ID |
| html | string | 생성된 HTML 코드 |
| css | string | 생성된 CSS 코드 |
| sections | array | 섹션별 콘텐츠 |
| generationTime | number | 생성 소요 시간 (초) |

#### 비즈니스 규칙
1. Claude API로 마그네틱 세일즈 원칙 적용 콘텐츠 생성
2. 반응형 디자인 자동 적용 (Mobile-First)
3. 생성 시간 예상: 30-60초
4. 이미지 위치 자동 매칭

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 프롬프트 부족 | 추가 정보 입력 안내 |
| 생성 실패 | 재시도 버튼 제공, 로그 기록 |
| 이미지 누락 | 플레이스홀더 이미지 사용 |

---

### LP-003: 이미지 업로드/처리

| 항목 | 내용 |
|------|------|
| **기능 ID** | LP-003 |
| **기능명** | 이미지 업로드 및 최적화 |
| **설명** | 랜딩페이지에 사용할 이미지를 업로드하고 자동 최적화하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 검증 규칙 |
|--------|------|------|-----------|
| file | File | Y | JPG, PNG, WebP |
| imageType | string | Y | hero, profile, product, testimonial |
| projectId | string | Y | 연결할 프로젝트 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| imageId | string | 업로드된 이미지 ID |
| url | string | 이미지 URL |
| thumbnailUrl | string | 썸네일 URL |
| optimizedSize | number | 최적화 후 파일 크기 |

#### 비즈니스 규칙
1. 파일 크기 제한: 5MB
2. 자동 리사이징: 용도별 최적 크기
   - Hero: 최대 1920x1080
   - Profile: 최대 400x400
   - Product: 최대 800x800
3. WebP 자동 변환으로 용량 최적화
4. 드래그앤드롭 지원

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 파일 크기 초과 | "5MB 이하 파일만 업로드 가능합니다" |
| 지원하지 않는 형식 | "JPG, PNG, WebP 형식만 가능합니다" |
| 스토리지 한도 초과 | 기존 이미지 삭제 안내 |

---

### LP-004: 미리보기

| 항목 | 내용 |
|------|------|
| **기능 ID** | LP-004 |
| **기능명** | 랜딩페이지 실시간 미리보기 |
| **설명** | 생성된 랜딩페이지를 데스크톱/모바일 뷰로 미리보는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| pageId | string | Y | 미리볼 페이지 ID |
| viewMode | string | Y | desktop, tablet, mobile |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| previewUrl | string | 미리보기 URL |
| html | string | 렌더링된 HTML |

#### 비즈니스 규칙
1. 실시간 미리보기 (편집 시 즉시 반영)
2. 디바이스별 뷰 전환 버튼
3. 미리보기 URL 공유 가능 (24시간 유효)

---

### LP-005: 배포

| 항목 | 내용 |
|------|------|
| **기능 ID** | LP-005 |
| **기능명** | 랜딩페이지 배포 |
| **설명** | 완성된 랜딩페이지를 고유 URL로 배포하여 공개하는 기능 |
| **우선순위** | P1 |

#### 입력
| 필드명 | 타입 | 필수 | 검증 규칙 |
|--------|------|------|-----------|
| pageId | string | Y | 배포할 페이지 ID |
| customSlug | string | N | 영문, 숫자, 하이픈만 허용 |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| deployedUrl | string | 배포된 URL |
| status | string | 배포 상태 |
| deployedAt | datetime | 배포 일시 |

#### URL 구조 (PENDING-002 관련)
- 기본: `https://app.domain.com/p/{userId}/{pageSlug}`
- 예시: `https://app.domain.com/p/user123/insurance-landing`

#### 비즈니스 규칙
1. 배포 시 SEO 메타태그 자동 생성
2. Open Graph 태그 설정 (SNS 공유용)
3. Google Analytics 추적 코드 삽입 옵션
4. 배포 취소/비공개 전환 가능

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 슬러그 중복 | "이미 사용 중인 URL입니다" |
| 배포 실패 | 재시도 옵션, 에러 로깅 |

---

### LP-006: 수정/삭제

| 항목 | 내용 |
|------|------|
| **기능 ID** | LP-006 |
| **기능명** | 랜딩페이지 수정 및 삭제 |
| **설명** | 기존 랜딩페이지의 콘텐츠를 수정하거나 삭제하는 기능 |
| **우선순위** | P1 |

#### 입력 (수정)
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| pageId | string | Y | 수정할 페이지 ID |
| sectionId | string | Y | 수정할 섹션 ID |
| content | object | Y | 변경된 콘텐츠 |

#### 입력 (삭제)
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| pageId | string | Y | 삭제할 페이지 ID |
| confirmDelete | boolean | Y | 삭제 확인 |

#### 비즈니스 규칙
1. MVP에서는 텍스트/이미지 교체만 지원
2. 섹션 순서 변경은 Phase 2
3. 삭제 시 이미지도 함께 삭제
4. 배포된 페이지 수정 시 즉시 반영
5. 삭제 시 30일간 복구 가능 (휴지통)

---

## 5. DB 수집 기능 상세 정의

### DB-001: 구글 폼 URL 연결

| 항목 | 내용 |
|------|------|
| **기능 ID** | DB-001 |
| **기능명** | 구글 폼 연동 |
| **설명** | 고객 정보 수집을 위한 구글 폼 URL을 랜딩페이지에 연결하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 검증 규칙 |
|--------|------|------|-----------|
| pageId | string | Y | 연결할 페이지 ID |
| googleFormUrl | string | Y | 유효한 Google Forms URL |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| success | boolean | 연결 성공 여부 |
| linkedUrl | string | 연결된 폼 URL |

#### 비즈니스 규칙 (DEC-006 준수)
1. Google Forms URL 형식 검증
2. 연결된 폼 URL은 랜딩페이지 CTA 버튼에 자동 삽입
3. 폼 제출 데이터는 구글 시트에 저장 (외부 관리)
4. UTM 파라미터 자동 추가 옵션

#### 예외 처리
| 상황 | 처리 방법 |
|------|-----------|
| 잘못된 URL 형식 | "유효한 Google Forms URL을 입력해주세요" |
| 접근 불가 폼 | "폼 접근 권한을 확인해주세요" |

---

### DB-002: CTA 버튼 삽입

| 항목 | 내용 |
|------|------|
| **기능 ID** | DB-002 |
| **기능명** | 구글 폼 연결 CTA 버튼 삽입 |
| **설명** | 랜딩페이지에 구글 폼으로 연결되는 CTA 버튼을 자동 삽입하는 기능 |
| **우선순위** | P0 (MVP 필수) |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| pageId | string | Y | 페이지 ID |
| buttonText | string | Y | 버튼 텍스트 |
| buttonStyle | string | N | 버튼 스타일 (primary, secondary) |
| position | string | Y | 삽입 위치 (hero, offer, footer) |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| buttonId | string | 생성된 버튼 ID |
| insertedHtml | string | 삽입된 HTML |

#### 비즈니스 규칙
1. 버튼 클릭 시 새 탭에서 구글 폼 열기
2. 버튼 텍스트 기본값: "무료 상담 신청하기"
3. 클릭 추적을 위한 이벤트 자동 삽입

---

## 6. 대시보드 기능 상세 정의

### DASH-001: 프로젝트 목록

| 항목 | 내용 |
|------|------|
| **기능 ID** | DASH-001 |
| **기능명** | 프로젝트 목록 조회 |
| **설명** | 사용자가 생성한 랜딩페이지 프로젝트 목록을 조회하는 기능 |
| **우선순위** | P1 |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| userId | string | Y | 사용자 ID |
| page | number | N | 페이지 번호 (기본값: 1) |
| limit | number | N | 페이지당 항목 수 (기본값: 10) |
| status | string | N | 필터: draft, published, archived |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| projects | array | 프로젝트 목록 |
| projects[].id | string | 프로젝트 ID |
| projects[].title | string | 프로젝트 제목 |
| projects[].status | string | 상태 |
| projects[].thumbnail | string | 썸네일 URL |
| projects[].createdAt | datetime | 생성일 |
| projects[].updatedAt | datetime | 수정일 |
| projects[].publishedUrl | string | 배포된 URL (있는 경우) |
| totalCount | number | 전체 프로젝트 수 |
| pageInfo | object | 페이지네이션 정보 |

#### 비즈니스 규칙
1. 최신순 정렬 기본
2. 상태별 필터링 지원
3. 검색 기능 (제목 기준)
4. 빠른 작업 버튼 (편집, 미리보기, 삭제)

---

### DASH-002: 기본 통계

| 항목 | 내용 |
|------|------|
| **기능 ID** | DASH-002 |
| **기능명** | 기본 통계 조회 |
| **설명** | 사용자의 랜딩페이지 관련 기본 통계를 조회하는 기능 |
| **우선순위** | P1 |

#### 입력
| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| userId | string | Y | 사용자 ID |
| period | string | N | 기간 (7d, 30d, 90d) |

#### 출력
| 필드명 | 타입 | 설명 |
|--------|------|------|
| summary.totalProjects | number | 총 프로젝트 수 |
| summary.publishedPages | number | 배포된 페이지 수 |
| summary.totalViews | number | 총 조회수 |
| summary.totalClicks | number | CTA 클릭 수 |
| recentActivity | array | 최근 활동 목록 |

#### 비즈니스 규칙
1. MVP에서는 기본 카운트 통계만 제공
2. 상세 분석 (전환율, 히트맵 등)은 Phase 2
3. 통계 데이터 24시간 단위 갱신

---

## 7. 공통 요구사항

### 7.1 성능 요구사항

| 항목 | 기준 |
|------|------|
| 페이지 로딩 | 3초 이내 |
| AI 응답 (첫 토큰) | 1초 이내 (스트리밍) |
| 이미지 업로드 | 10초 이내 (5MB 기준) |
| 랜딩페이지 생성 | 60초 이내 |
| 동시 사용자 | 100명 지원 |

### 7.2 보안 요구사항

| 항목 | 구현 방법 |
|------|-----------|
| HTTPS | Vercel 자동 SSL |
| 인증 | Supabase Auth (JWT) |
| API 키 보안 | 서버사이드 관리 (Edge Functions) |
| 입력 검증 | Zod 스키마 검증 |
| XSS 방지 | 콘텐츠 이스케이프 |
| CORS | 도메인 화이트리스트 |

### 7.3 에러 처리 표준

| HTTP 코드 | 상황 | 사용자 메시지 |
|-----------|------|---------------|
| 400 | 잘못된 요청 | "입력 정보를 확인해주세요" |
| 401 | 인증 실패 | "로그인이 필요합니다" |
| 403 | 권한 없음 | "접근 권한이 없습니다" |
| 404 | 리소스 없음 | "요청하신 정보를 찾을 수 없습니다" |
| 429 | 요청 한도 초과 | "잠시 후 다시 시도해주세요" |
| 500 | 서버 오류 | "일시적인 오류가 발생했습니다" |

---

## 8. 문서 변경 이력

| 날짜 | 버전 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 2025-12-15 | 1.0 | 기능 정의서 초안 작성 | Product Manager v8 |

---

## 9. 관련 문서

- [00_요구사항_정의서.md](/mnt/c/Users/lpian/OneDrive/문서/db-automation/magnetic-sales-webapp/로드맵/00_요구사항_정의서.md)
- [04_의사결정_로그.md](/mnt/c/Users/lpian/OneDrive/문서/db-automation/magnetic-sales-webapp/로드맵/04_의사결정_로그.md)
- [02_유료강의_분석.md](/mnt/c/Users/lpian/OneDrive/문서/db-automation/magnetic-sales-webapp/참고자료_분석/02_유료강의_분석.md)
- [05_시스템프롬프트_분석.md](/mnt/c/Users/lpian/OneDrive/문서/db-automation/magnetic-sales-webapp/참고자료_분석/05_시스템프롬프트_분석.md)
